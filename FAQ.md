# Часто задаваемые вопросы (FAQ)

## Общие вопросы

### Q: Сколько стоит использование этого парсера?

**A:** Проект полностью бесплатный. Google Sheets API предоставляет бесплатную квоту (достаточную для большинства случаев). YouTube Data API также имеет бесплатную квоту 10,000 единиц в день.

### Q: Нужно ли авторизовываться в YouTube/TikTok/Instagram?

**A:** Нет, парсер работает с публичными данными и не требует авторизации.

### Q: Как часто можно запускать парсер?

**A:** Рекомендуется запускать 1-2 раза в день. Слишком частые запросы могут привести к блокировке IP со стороны платформ.

### Q: Сколько блогеров можно отслеживать?

**A:** Технически - неограниченно. Практически - зависит от лимитов Google Sheets API и времени выполнения. Рекомендуется до 50-100 блогеров.

## Настройка и установка

### Q: Обязательно ли использовать виртуальное окружение?

**A:** Не обязательно, но настоятельно рекомендуется. Это изолирует зависимости проекта от системных библиотек Python.

### Q: Можно ли использовать без Google Sheets и сохранять данные локально?

**A:** Да, можно модифицировать код. Вместо `sheets_manager.add_video_data()` используйте запись в CSV или базу данных.

### Q: Как добавить нового блогера?

**A:** Просто отредактируйте файл `config.json` и добавьте новый блок:
```json
{
  "name": "Имя нового блогера",
  "youtube": "URL",
  "tiktok": "URL",
  "instagram": "URL"
}
```

### Q: Как удалить блогера из отслеживания?

**A:** Удалите соответствующий блок из `config.json` или просто удалите URL платформ, оставив пустые строки.

## Ошибки и проблемы

### Q: Ошибка "credentials.json not found"

**A:**
1. Убедитесь, что файл находится в корне проекта
2. Проверьте правильность пути
3. Убедитесь, что запускаете скрипт из правильной директории

### Q: Ошибка "SpreadsheetNotFound"

**A:**
1. Проверьте название таблицы в `config.json`
2. Убедитесь, что таблица существует в Google Sheets
3. Проверьте, предоставлен ли доступ Service Account (email из credentials.json)

### Q: Парсер не находит видео, хотя они есть

**A:** Возможные причины:
1. **Изменилась структура сайта** - платформы регулярно обновляют HTML/CSS. Нужно обновить селекторы в парсерах.
2. **Блокировка IP** - платформа детектировала автоматические запросы. Попробуйте:
   - Использовать VPN
   - Увеличить задержки между запросами
   - Использовать прокси-серверы
3. **Профиль приватный** - парсер работает только с публичными профилями

### Q: Selenium выдает ошибки с WebDriver

**A:**
1. Убедитесь, что Chrome установлен
2. Обновите webdriver-manager: `pip install --upgrade webdriver-manager`
3. Попробуйте запустить с правами администратора
4. Проверьте антивирус - он может блокировать WebDriver

### Q: Программа очень медленно работает

**A:**
1. **YouTube парсер** - попробуйте переключить на режим Selenium:
   ```python
   self.youtube_parser = YouTubeParser(use_selenium=True)
   ```
2. **Слишком много блогеров** - разбейте на несколько конфигурационных файлов
3. **Медленный интернет** - увеличьте timeout в парсерах

### Q: Данные неточные или устаревшие

**A:**
1. Проверьте, когда ролик был опубликован - некоторые платформы обновляют счетчики с задержкой
2. TikTok/Instagram могут показывать разные данные в зависимости от региона
3. YouTube иногда округляет большие числа (1.2M вместо точного числа)

## Работа с данными

### Q: Как посмотреть историю обработанных роликов?

**A:** Откройте файл `processed_videos.json` - там сохранены URL всех обработанных роликов с датами.

### Q: Можно ли сбросить историю и парсить все заново?

**A:** Да, просто удалите или очистите файл `processed_videos.json`:
```json
{}
```

### Q: Как экспортировать данные из Google Sheets?

**A:**
1. Откройте таблицу
2. Файл → Скачать → выберите формат (Excel, CSV, PDF)

### Q: Можно ли парсить не только последний ролик?

**A:** Да, но потребуется модификация кода. В каждом парсере есть метод `get_latest_video()` - его можно расширить для получения нескольких роликов.

### Q: Как получить данные за определенный период?

**A:** В Google Sheets используйте фильтры:
1. Выделите данные
2. Data → Create a filter
3. Фильтруйте по колонке "Дата публикации" или "Дата парсинга"

## Платформы

### Q: Почему YouTube парсится хорошо, а TikTok/Instagram - нет?

**A:** YouTube более открыт для парсинга. TikTok и Instagram активно борются с ботами:
- Используют динамическую загрузку контента
- Часто меняют структуру HTML
- Требуют сложные заголовки и cookies
- Блокируют подозрительные IP

**Решение:** Используйте Selenium (медленнее, но надежнее) или API (требует регистрации).

### Q: Можно ли добавить поддержку других платформ (Telegram, VK, etc)?

**A:** Да, создайте новый парсер по аналогии с существующими:
1. Скопируйте `parsers/youtube_parser.py`
2. Переименуйте класс и методы
3. Реализуйте парсинг для новой платформы
4. Добавьте в `main.py`

### Q: YouTube API квота закончилась, что делать?

**A:** Переключитесь на парсинг HTML без API:
```python
self.youtube_parser = YouTubeParser(use_selenium=False)
```

Или дождитесь сброса квоты (происходит ежедневно в полночь по тихоокеанскому времени).

### Q: TikTok постоянно блокирует, есть решение?

**A:**
1. Используйте прокси-серверы
2. Увеличьте задержки: `time.sleep(10)`
3. Используйте ротацию User-Agent
4. Рассмотрите использование TikTok API (требует бизнес-аккаунт)

### Q: Instagram требует авторизацию, как быть?

**A:**
1. Парсер работает с публичными данными - убедитесь, что профиль публичный
2. Некоторые данные доступны только через Instagram Graph API (требует Facebook Developer Account)
3. Альтернатива: используйте сторонние сервисы с API

## Автоматизация

### Q: Задача в Task Scheduler не запускается

**A:**
1. Проверьте "Журнал планировщика заданий"
2. Убедитесь, что используются абсолютные пути
3. Запустите задачу вручную и посмотрите ошибки
4. Проверьте права - задача должна запускаться с правами пользователя

### Q: Cron не работает на Linux

**A:**
1. Проверьте логи: `grep CRON /var/log/syslog`
2. Убедитесь, что cron запущен: `sudo service cron status`
3. Используйте абсолютные пути в crontab
4. Проверьте права: `chmod +x script.sh`

### Q: Как получать уведомления о результатах?

**A:** Смотрите раздел "Уведомления" в [AUTOMATION.md](AUTOMATION.md). Можно настроить:
- Email уведомления (через SMTP)
- Telegram уведомления (через Telegram Bot API)
- Discord/Slack webhooks

## Производительность

### Q: Как ускорить парсинг?

**A:**
1. **Отключите Selenium для YouTube** (если работает без него)
2. **Уменьшите задержки** - но осторожно, можете получить бан
3. **Парсите только нужные платформы** - удалите URL ненужных
4. **Используйте многопоточность** (требует модификации кода)

### Q: Парсинг занимает слишком много времени

**A:** Типичное время:
- YouTube (без Selenium): 2-5 сек на блогера
- TikTok (с Selenium): 10-15 сек на блогера
- Instagram (с Selenium): 10-15 сек на блогера

Для 10 блогеров: ~5-10 минут
Для 50 блогеров: ~20-40 минут

## Безопасность и конфиденциальность

### Q: Безопасно ли хранить credentials.json?

**A:**
1. Никогда не публикуйте этот файл
2. Добавьте в `.gitignore`
3. Service Account имеет доступ только к конкретной таблице
4. Можно в любой момент отозвать доступ в Google Cloud Console

### Q: Могут ли заблокировать мой IP?

**A:** Да, если делаете слишком много запросов. Рекомендации:
- Не запускайте чаще 2-3 раз в день
- Используйте задержки между запросами
- При блокировке - смените IP или используйте VPN

### Q: Законно ли парсить данные с этих платформ?

**A:** Парсинг публичных данных обычно не нарушает законы, но может нарушать Terms of Service платформ. Используйте на свой риск и для личных/исследовательских целей.

## Расширенное использование

### Q: Как добавить больше метрик (дислайки, сохранения, etc)?

**A:** Модифицируйте соответствующий парсер:
1. Найдите HTML элемент с нужной метрикой
2. Добавьте парсинг в метод `_get_video_details()`
3. Добавьте поле в словарь возвращаемых данных
4. Добавьте колонку в Google Sheets (в `utils/sheets_manager.py`)

### Q: Можно ли парсить комментарии к роликам?

**A:** Да, но это значительно увеличит время парсинга. Нужно:
1. Добавить отдельный метод для получения комментариев
2. Создать отдельную таблицу для комментариев
3. Учитывать pagination (комментариев может быть тысячи)

### Q: Как получить аналитику по динамике (сравнение с предыдущими днями)?

**A:** Используйте формулы в Google Sheets:
1. Создайте отдельный лист "Analytics"
2. Используйте QUERY, VLOOKUP, ARRAYFORMULA для анализа
3. Постройте графики (Insert → Chart)

### Q: Можно ли интегрировать с Power BI / Tableau?

**A:** Да, у Google Sheets есть коннекторы для этих платформ. Или экспортируйте данные в CSV и загрузите в BI инструменты.

## Troubleshooting

### Q: В логах ошибка "ConnectionError" или "Timeout"

**A:**
1. Проверьте интернет-соединение
2. Платформа может быть временно недоступна
3. Увеличьте timeout в парсерах:
   ```python
   response = requests.get(url, headers=headers, timeout=30)  # было 10
   ```

### Q: Ошибка "JSONDecodeError"

**A:**
1. Платформа вернула не JSON (возможно HTML с ошибкой)
2. Добавьте обработку:
   ```python
   try:
       data = json.loads(text)
   except json.JSONDecodeError:
       print(f"Не удалось распарсить JSON: {text[:200]}")
       return None
   ```

### Q: Программа "зависает" и не завершается

**A:**
1. Selenium не закрылся - добавьте таймауты
2. Проверьте метод `cleanup_parsers()` - он должен вызваться
3. Используйте Ctrl+C для прерывания

### Q: После обновления платформы парсер перестал работать

**A:** Платформы регулярно меняют структуру:
1. Откройте страницу в браузере
2. Используйте DevTools (F12) для поиска нужных элементов
3. Обновите CSS селекторы в парсере
4. Протестируйте

## Поддержка и помощь

### Q: Где получить помощь, если ничего не помогает?

**A:**
1. Проверьте логи в `logs/`
2. Изучите трейсбек ошибки
3. Попробуйте запустить с отладкой:
   ```python
   # Добавьте в начало main.py
   import logging
   logging.basicConfig(level=logging.DEBUG)
   ```

### Q: Как внести свой вклад в проект?

**A:** Проект создан Claude Code и может быть расширен:
1. Улучшение парсеров
2. Добавление новых платформ
3. Оптимизация производительности
4. Улучшение обработки ошибок

---

**Не нашли ответ?** Проверьте:
- [README.md](README.md) - основная документация
- [SETUP.md](SETUP.md) - установка и настройка
- [AUTOMATION.md](AUTOMATION.md) - автоматизация
- Логи в папке `logs/`
